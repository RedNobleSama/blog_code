---
title: mysql事务
toc: true
mathjx: true
cover: /2018/10/16/mysql事务/head.png
tags:
  - Mysql
categories:
  - 数据库
  - Mysql
abbrlink: 33118
date: 2018-10-16 21:31:59
update:
---

#### Mysql事务
事务(transaction)是作为一个单元的一组有序的数据库操作(sql语句分组)。

##### 事务的四大特性(ACID)
1. 原子性(Atomicity)：一个事务必须视为一个不可分割的最小工作单元。整个事务中的所有操作要么全部成功要么全部失败回滚。对于一个事务来说，不可能只执行其中的一部分操作。

2. 一致性(Consistency)：执行事务前数据库是一致的，执行事务之后数据库也还是一致的。

3. 隔离性(lsolation)：在事务正确提交之前，不允许把该事务对数据的任何改变提供给任何其他事务。

4. 持久性(Durability)：事务正确提交后，其结果将永久保存在数据库中，即使在事务提交后有了其他故障，事务的处理结果也会得到保存。

##### 事务的隔离级别
SQL标准定义了4类隔离级别，包括了一些具体规则，用来限定事务内外的哪些改变是可见的，哪些是不可见的。

1. 读取未提交内容(Read Uncommitted)：在该隔离级别，所有的事务都可以看到其他未提交事务的执行结果。读取未提交的数据，被成为脏读。

2. 读取提交内容(Read Committed)：一个事务只能看见已经提交事务所做的改变。

3. 可重复读(Repeatable Read)：mysql的默认事务隔离级别。它确保同一事务的多个实例在并发读取数据的时候，会看到同意的数据行。不过这会导致另一个棘手的问题：幻读。幻读指读取某一范围的数据行时，会发现有新的幻影行。

4. 串行读(Serializable)：最高的隔离级别。通过强制事务排序，使之不能互相冲突，从而解决幻读问题。简言之，在每个读的数据行上加上共享锁。在这个级别时，可能导致大量的超时现象和锁竞争。
